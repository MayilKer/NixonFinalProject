@model List<Order>
@{
    ViewData["Title"] = "GetOrders";
    int count = 0;
}

<main role="main" id="myAccountMain">
    <div class="layout-main-content">
        <div class="layout-content-wrapper">
            <div class="container">
                <div class="row flex-column-reverse flex-lg-row">
                    <div class="account-sidebar offset-xxl-1 col-xxl-2 col-lg-3">
                        <div class="account-sidebar_content">
                            <h5 class="account-sidebar_title mt-2 mt-lg-5 mb-lg-5">
                                Account
                            </h5>
                            <ul class="account-sidebar_menu">
                                <li class="is-active">
                                    <a asp-controller="MyAccount" asp-action="GetOrders" id="OrderHistoryss">
                                        Order History
                                    </a>
                                </li>
                                <li>
                                    <a asp-controller="MyAccount" asp-action="Index" id="AcDetails">
                                        Account Details
                                    </a>
                                </li>
                                <li>
                                    <a asp-controller="Account" asp-action="LogOut">
                                        Sign out
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-5 account-content col-xxl-8 col-lg-9">
                        <div id="RecoverPasswordFormAccount" class="recover_password hide">
                            <h2>
                                Reset your password
                            </h2>
                            <div class="row">
                                <div class="col-md-6 col-lg-5 col-xl-4">
                                    <div class="p2">
                                        <p>
                                            We will send you an email to reset your password.
                                        </p>
                                    </div>
                                    <form method="post">
                                        <div class="form-group">
                                            <label for="RecoverEmail" class="label-inline">
                                                Email
                                            </label>
                                            <input type="email" id="RecoverEmail" class="form-control">
                                        </div>
                                        <div class="form-group cancel-btn">
                                            <input type="submit" value="Submit" class="btn btn-dark signIn-btn">
                                            <a class="mt-3 p3 text-dark form-text btn-links" href="javascript:void(0)" id="HideRecoverPasswordLinkAccount">
                                                Cancel
                                            </a>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="account-content_main">
                        </div>
                        <div id="orderHis">
                            <h5 class="col-12 pb-2 pl-lg-0 text-lg-left">
                                <a asp-controller="MyAccount" asp-action="GetOrders"></a>
                                Order History
                            </h5>
                            <hr>
                            <div class="account-block">
                                @if (Model.Count() > 0)
                                {
                                    <table class="table table-dark">
                                        <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">User Name</th>
                                                <th scope="col">Total</th>
                                                <th scope="col">Order Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            @foreach (Order item in Model)
                                            {
                                                count++;
                                                <tr>
                                                    <th scope="row">@count</th>
                                                    <td>@item.AppUser.UserName</td>
                                                    <td>@item.OrdersItems.Sum(o => o.TotalPrice)</td>
                                                    <td>@item.Status</td>
                                                </tr>
                                            }

                                        </tbody>
                                    </table>
                                }
                                else
                                {
                                    <div class="account-block_content">
                                        You haven't placed any orders yet.
                                    </div>
                                }

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

